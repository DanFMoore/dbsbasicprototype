{% extends "layout.html" %}

{% block page_title %}
  DBS Prototype
{% endblock %}

{% block content %}

<main id="content" role="main">
  {% include 'includes/phase_banner_alpha.html' %}
  <div class="grid-row">
  	<div class="column-two-thirds">

        {% include 'includes/error_summary.html' %}{# include if this page has validation requirements #}

    	<h1 class="heading-large">Verifying your identity</h1>

        <p>You need to verify your identity to get a basic criminal record check.</p>

        <h2 class="heading-medium">How to verify your identity</h2>

        <p>You can verify your identity online now for free using GOV.UK Verify.</p>
        <p>GOV.UK Verify is the new government service that lets you prove who you are online.</p>
        <p>It takes about 10 minutes to verify your identity the first time you use GOV.UK Verify, and a couple of minutes any time after that.</p>
        
    </div>

    <!-- Split area -->
    <form action="https://govuk-verify.herokuapp.com/intro?requestId=dbs-basic-application" method="post" class="form">
    <!-- https://govuk-verify.herokuapp.com/intro?requestId=dbs-basic-application -->

        <div class="grid-row" style="padding-right: 15px; padding-left: 15px;">
            <div class="column-two-thirds">
                <div id="verify-agree-group" class="form-group">
                    <div id="verify-agree-group-error-message" class="form-error validation-message"></div>
                    <label class="block-label" for="verify-agree">
                        <input id="verify-agree" type="checkbox" name="verify-agree" value="Agree"
                            data-parsley-class-handler="#verify-agree-group"
                                    data-parsley-errors-container="#verify-agree-group-error-message"
                                    data-parsley-required="true"
                                    data-parsley-required-message="You must agree to share your details from GOV.UK Verify">
                        I agree to the Basic criminal record check service using my name, date of birth, and address provided by GOV.UK Verify.
                    </label>
                </div>
                <a class="button button-start" href="https://govuk-verify.herokuapp.com/intro?requestId=dbs-basic-application">Continue to GOV.UK Verify</a>
                <input type="submit" class="button button-start js-hidden" style="margin-bottom: 15px;" value="GOV.UK Verify">


                <h2 class="heading-medium">If you cannot verify your identity online</h2>

                <p>You'll have to go to the Post Office in person with your identity documents if you cannot use GOV.UK Verify to prove your identity online. </p>
                <p>This may delay your application being processed.</p>
                <p><a href="exceptionRouteStart.html" class="button button-start">Continue without using GOV.UK Verify</a></p>
            </div>
        </div>

        <div>


            <div class="">
                <a href="https://govuk-verify.herokuapp.com/intro?requestId=dbs-basic-application&verify=false">TEST fail verify</a><br>
                <a href="formFirstPage.html">TEST skip Verify</a>
            </div>

        </div>
    </form>


  </div>
</main>

<!-- scripts for page validation -->
<script src="/public/javascripts/jquery-1.11.3.js"></script>
<script src="/public/javascripts/parsley.min.js"></script>
<script src="/public/javascripts/form-utilities.js"></script>

<script type="text/javascript">
    var parsleyForm;
    var thisFormInstance = $( "form:first-of-type" ); // assuming we're validating first form on this page

    // attach parsley validation to the form
    parsleyForm = thisFormInstance.parsley({
        excluded: 'input[type=button], input[type=submit], input[type=reset]',
        focus:"none"
    });

    // before form is validated, catch the event and do custom validation if needed
      thisFormInstance.parsley().on('form:validate', function(formInstance) {

        var ok = true;
        // add custom validations here - set ok to false if any of them fail validation

        //ok = ok && checkDiagnosisFutureDate();
        //ok = ok && validateDOB();

        if (!ok) {
          formInstance.validationResult = false;
        } else {
          formInstance.validationResult = true;
        }
      });

      // what to do when form doesn't validate
      thisFormInstance.parsley().on('form:error', function(formInstance) {
        //console.log('form error');

        // construct error display
        GOVUK.formUtilities.showErrorSummary();
      });

      // what to do when form validates successfully
      thisFormInstance.parsley().on('form:submit', function(formInstance) {
        //console.log('form success');
        GOVUK.formUtilities.hideErrorSummary();

        // allow the form to submit
        return true;
      });


      function toggleHelp() {
            // When the extra help link is clicked it will display help block
            if($('#helpArrow').hasClass('arrow-closed')) {
                $('#helpArrow').removeClass('arrow-closed');
                $('#helpArrow').html("▼");
                $('#helpBlockText').removeClass('js-hidden');
            }
            else {
                $('#helpArrow').addClass('arrow-closed');
                $('#helpArrow').html("►");
                $('#helpBlockText').addClass('js-hidden');
            }

        }


</script>


{% endblock %}
